<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>pgpNow - Instant PGP encryption and decryption in your browser</title>
        
    <link type="text/css" rel="stylesheet" href="css/groundwork.css" />
    <link type="text/css" rel="stylesheet" href="css/toastr.min.css" />
    <link type="text/css" rel="stylesheet" href="css/magnific-popup.css" />
    
    <link type="text/css" rel="stylesheet" href="css/style.css" />    
</head>
<body>
	
	<div class="padded">
		<div class="row" id="errors"></div>
		
		<div class="one fifth">
			<div class="row">
				<label><b>Keys</b></label>
			</div>
			<div class="row">
				<button id="showOwnKeysButton" class="block">Show my keys</button>
			</div>
			<div class="pad-top row">
				<label>People</label>
			</div>
			<div class="row">
				<select size="4" data-bind="options: partners,
								   optionsText: 'name',
								   value: selectedPartner"></select>
			</div>
			<div class="row">				
				<button onclick="partnerManager.showNewPartnerModal()" class="one half">+</button>
				<button onclick="partnerManager.removeSelected()" class="one half">-</button>		
			</div>
		</div>
		<div class="pad-left four fifth">
			<div>
				<div class="row">
					<label><b>Encryption</b></label>				
				</div>
				<div class="row">				
					<div>
						
						<label>
							<span>Encrypt</span>
							<!-- ko if: selectedPartner() -->
							<span> for</span>
							<b><span data-bind="text: selectedPartner().name"></span></b>
							<!-- /ko -->
						</label>
					</div>					
				</div>		
				<div class="row">
					<textarea id="encryptTextArea"></textarea>
				</div>	
				<div class="row half-pad-top">
					<button onclick="appEvents.encryptForPartner()">Encrypt</button>
				</div>
			</div>
			<div>				
				<div class="row pad-top">	
					<label>
						<span>Decrypt</span>
						<!-- ko if: selectedPartner() -->
						<span> (checking signature for</span>
						<b><span data-bind="text: selectedPartner().name"></span></b>
						<span>)</span>
						<!-- /ko -->
					</label>			
				</div>		
				<div class="row">
					<textarea id="decryptTextArea"></textarea>
				</div>	
				<div class="row half-pad-top">
					<button onclick="appEvents.decryptFromPartner()">Decrypt</button>
				</div>
			</div>				
		</div>
	</div>
	
	<div id="ownKeysBox" class="mfp-hide white-popup">
		<div class="row">
			<div class="one half half-pad-right">
				<div class="row">
					<label>Public (give this to your friends)</label>
				</div>
				<div class="row">
					<textarea onclick="this.select()"
					          data-bind="value: own.publicKey"></textarea>
				</div>
			</div>
			<div class="one half half-pad-left">
				<div class="row">
					<label>Private (give this to NOBODY!)</label>
				</div>
				<div class="row">
					<textarea onclick="this.select()"
					          data-bind="value: own.privateKey"></textarea>
				</div>
			</div>
		</div>
	</div>
	
	<div id="editPartner" class="mfp-hide white-popup">		
		<div class="row">
			<label>Public key</label>
		</div>
		<div class="row">			
			<textarea id="partnerPublicKey"
			          data-bind="value: tmp.editPartnerPublicKey"></textarea>			
		</div>
		<div class="row pad-top">
			<div class="one half half-pad-right">
				<button class="block" onclick="partnerManager.savePartner()">Save Partner</button>
			</div>
			<div class="one half half-pad-left">
				<button class="block" onclick="modalManager.closeModal()">Cancel</button>
			</div>
		</div>		
	</div>
	
	<div id="createNewKeys" class="mfp-hide white-popup">		
		<div class="row">
			<h1 style="font-size: 1.5em;">Welcome to pgpNow :)</h1>
		</div>
		<div class="row">
			<p>With pgpNow you have secure PGP-based encryption right in your browser. I don't have to tell you, that it actually it open source, do I?</p>
			<p>To get started just enter your name so others know who you are (it will be stored in the public key so others can verify the messages)</p>			
		</div>
		
		<form id="setNewUsernameForm">
			<div class="row">
				<label><b>Enter your name</b></label>
			</div>
			<div class="row">
				<input id="newUsernameInput" type="text" />
			</div>			
			<div class="row pad-top">
				<p><small><b>NOTE: </b>Generating the keys may take some seconds. Your browser may hang during that time.</small></p>
			</div>
			<div class="row">
				<input id="setNewUsernameButton" type="submit" class="center" value="Save my name &amp; start pgpNow" />
			</div>		
		</form>
	</div>
		
	<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
	
	<!-- start openpgpjs -->
	<script type="text/javascript" src="openpgpjs/src/ciphers/hash/sha.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/hash/md5.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/hash/ripe-md.js"></script>

	<!-- crypto libs -->	
	<script type="text/javascript" src="openpgpjs/src/ciphers/symmetric/aes.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/symmetric/cast5.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/symmetric/dessrc.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/symmetric/twofish.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/symmetric/blowfish.js"></script>

	<script type="text/javascript" src="openpgpjs/src/ciphers/asymmetric/jsbn.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/asymmetric/jsbn2.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/asymmetric/dsa.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/asymmetric/elgamal.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/asymmetric/rsa.js"></script>

	<script type="text/javascript" src="openpgpjs/src/ciphers/openpgp.crypto.sym.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/openpgp.crypto.js"></script>
	<script type="text/javascript" src="openpgpjs/src/ciphers/openpgp.cfb.js"></script>

	<!-- compression -->

	<!-- encoding -->
	<script type="text/javascript" src="openpgpjs/src/encoding/base64.js"></script>
	<script type="text/javascript" src="openpgpjs/src/encoding/openpgp.encoding.asciiarmor.js"></script>
	<script type="text/javascript" src="openpgpjs/src/encoding/openpgp.encoding.js"></script>

	<!-- openpgp types -->
	<script type="text/javascript" src="openpgpjs/src/type/openpgp.type.keyid.js"></script>
	<script type="text/javascript" src="openpgpjs/src/type/openpgp.type.mpi.js"></script>
	<script type="text/javascript" src="openpgpjs/src/type/openpgp.type.s2k.js"></script>

	<!-- openpgp packets -->
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.compressed.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.encrypteddata.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.encryptedintegrityprotecteddata.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.encryptedsessionkey.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.keymaterial.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.literaldata.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.marker.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.modificationdetectioncode.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.onepasssignature.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.signature.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.userattribute.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.userid.js"></script>
	<script type="text/javascript" src="openpgpjs/src/packet/openpgp.packet.js"></script>

	<!--  openpgp impl. -->
	<script type="text/javascript" src="openpgpjs/src/openpgp.js"></script>
	<script type="text/javascript" src="openpgpjs/src/config/openpgp.config.js"></script>
	<script type="text/javascript" src="openpgpjs/src/openpgp.keyring.js"></script>
	<script type="text/javascript" src="openpgpjs/src/openpgp.msg.message.js"></script>
	<script type="text/javascript" src="openpgpjs/src/openpgp.msg.privatekey.js"></script>
	<script type="text/javascript" src="openpgpjs/src/openpgp.msg.publickey.js"></script>
	<script type="text/javascript" src="openpgpjs/src/util/util.js"></script>
	<!-- end openpgpjs -->
	
	<script type="text/javascript" src="js/knockout-2.3.0.js"></script>
	<script type="text/javascript" src="js/knockout-mapping-2.4.1.js"></script>
	
	<script type="text/javascript" src="js/jstorage.min.js"></script>
	<script type="text/javascript" src="js/appStorage.js"></script>
	
	<script type="text/javascript" src="js/toastr.min.js"></script>
	<script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>	

	<script type="text/javascript" src="js/viewModel.js"></script>
	<script type="text/javascript" src="js/modalManager.js"></script>
	<script type="text/javascript" src="js/partnerManager.js"></script>
	
	<script type="text/javascript" src="js/appEvents.js"></script>
	<script type="text/javascript" src="js/popupManager.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
</body>
</html>